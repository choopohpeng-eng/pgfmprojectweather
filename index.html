<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Singapore 2-hr Nowcast Weather Information</title>
    
    <!-- CSS Link -->
    <!--<link rel="stylesheet" href="style.css"> -->

    <!-- Optional: Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
</head>

<body>
    <header>
        <h1>Singapore 2-hr Nowcast Weather Information</h1>
    </header>
   
    <div class="weather-display">
        <h2 id="region-name">Select a region for the weather infomation</h2>
        <div id="weather-icon" class="weather-icon">üåà</div>
        <div id="weather-info">The weather information for the selected region will appear here</div>
        <div id="time-info"></div>
    </div>

    <div id="region-table" class="region-table"></div>

    <footer>
        <!-- Footer content like copyright, contact info, etc. -->
        <p>&copy; 2025 PP Choo. All rights reserved.
            Data from <a href="https://data.gov.sg/dataset/nea-2-hour-weather-forecast" target="_blank">NEA API</a><br>
            Click a region above to see the weather information0.
        </p>
    </footer>

    <script>
    const regionName = document.getElementById("region-name");
    const weatherIcon = document.getElementById("weather-icon");
    const weatherInfo = document.getElementById("weather-info");
    const timeInfo = document.getElementById("time-info");
    
    const regionTable = document.getElementById("region-table");
    
    const weatherEmojis = {
      "Fair": "‚òÄÔ∏è",
      "Fair (Day)": "üå§Ô∏è",
      "Fair (Night)": "üåô",
      "Fair and Warm": "‚òÄÔ∏è",
      "Partly Cloudy": "‚õÖ",
      "Partly Cloudy (Day)": "üå§Ô∏è",
      "Partly Cloudy (Night)": "üåô‚òÅÔ∏è",
      "Cloudy": "‚òÅÔ∏è",
      "Hazy": "üå´Ô∏è",
      "Slighty Hazy": "üå´Ô∏è",
      "Windy": "üå¨Ô∏è",
      "Mist": "üå´Ô∏è",
      "Fog": "üå´Ô∏è",
      "Light Rain": "üå¶Ô∏è",
      "Moderate Rain": "üåßÔ∏è",
      "Heavy Rain": "üåßÔ∏èüåßÔ∏è",
      "Passing Showers": "üå¶Ô∏è",
      "Light Showers": "üå¶Ô∏è",
      "Showers": "üå¶Ô∏è",
      "Heavy Showers": "üå¶Ô∏è",
      "Thundery Showers": "‚õàÔ∏è",
      "Heavy Thundery Showers": "üå©Ô∏è",
      "Heavy Thundery Showers with Gusty Winds": "üå™Ô∏è"
    };

    const regions = [
      "Ang Mo Kio", "Bedok", "Bishan", "Boon Lay", "Bukit Batok", "Bukit Merah", "Bukit Panjang", "Bukit Timah",
      "Central Water Catchment", "Changi", "Choa Chu Kang", "Clementi", "City", "Geylang", "Hougang", "Jalan Bahar",
      "Jurong East", "Jurong Island", "Jurong West", "Kallang", "Lim Chu Kang", "Mandai", "Marine Parade", "Novena",
      "Pasir Ris", "Paya Lebar", "Pioneer", "Pulau Tekong", "Pulau Ubin", "Punggol", "Queenstown", "Seletar", "Sembawang",
      "Sengkang", "Sentosa", "Serangoon", "Southern Islands", "Sungei Kadut", "Tampines", "Tanglin", "Tengah", "Toa Payoh",
      "Tuas", "Western Islands", "Western Water Catchment", "Woodlands", "Yishun"
    ];

    regions.forEach(region => {
      const button = document.createElement("button");
      button.textContent = region;

      button.onclick = function() {
        document.querySelectorAll(".region-table button").forEach(btn => btn.classList.remove("active"));
        button.classList.add("active");
        fetchWeather(region);
      };

      regionTable.appendChild(button);
    });

    function fetchWeather(region) {
      fetch("https://api.data.gov.sg/v1/environment/2-hour-weather-forecast")
        .then(response => response.json())
        .then(data => {
          const forecast = data.items[0].forecasts.find(f => f.area === region);
          const start = data.items[0].valid_period.start;
          const end = data.items[0].valid_period.end;

          regionName.textContent = region;

          if (forecast) {
            const forecastText = forecast.forecast;
            weatherInfo.textContent = forecastText;
            weatherIcon.textContent = weatherEmojis[forecastText] || "üåà";
            timeInfo.textContent =
              "From: " + new Date(start).toLocaleTimeString() +
              " To: " + new Date(end).toLocaleTimeString();
          } else {
            weatherInfo.textContent = "No data available";
            weatherIcon.textContent = "‚ùì";
            timeInfo.textContent = "";
          }
        })
        .catch(error => {
          weatherInfo.textContent = "Error fetching data";
          weatherIcon.textContent = "‚ö†Ô∏è";
          timeInfo.textContent = "";
          console.error(error);
        });
    }
  </script>

    <!-- JavaScript Link (defer to improve performance) -->
    <!-- <script src="script.js"></script> -->
</body>
</html>